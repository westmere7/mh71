<!DOCTYPE html>
<html>
<head><meta http-equiv="cache-control" content="no-cache"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Expires" content="-1"><style type="text/css">/* CSS styles for the page */
body {
    font-family: 'Open Sans', sans-serif; /* Change to Open Sans */
    background-color: #f4f4f9;
    //margin: 00;
    margin-bottom: 7vw;
    margin-top: 0;
    display: flex;
    flex-direction: column;
    min-height: 00vh;
}

.content {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

h1 {
    font-size: 2rem;
    color: #333;
    margin: 20px 0;
    text-align: center; /* Add this line to center the text */
}

input[type="text"] {
    width: 300px;
    padding: 10px;
    font-size: rem;
    border: 2px solid #ccc;
    border-radius: 5px;
    margin-bottom: 20px;
}

button {
    width: 300px;
    padding: 10px;
    font-size: 1rem;
    color: #fff;
    background-color: #349ca4;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

button:disabled {
    background-color: #b7b7b7;
    cursor: not-allowed;
}

#result {
    font-size: 1.2rem;
    margin-top: 20px;
    color: #333;
}

#total-box {
    margin-top: 20px;
    padding: 30px; /* Increase padding for more space */
    font-size: 2.7rem; /* Increase font size for larger text */
    font-weight: bold;
    color: #fff;
    background-color: #28a745;
    border-radius: 15px; /* Round the corners of the box */
    display: none;
}

#breakdown {
    margin-top: 70px;
     padding-top: 20px;
    padding-bottom: 20px;
     padding-right: 30px;
    padding-left: 30px;
    font-size: 1rem;
    color: #333;
    background-color: #fff;
    border: 0px solid #ccc;
    border-radius: 15px;
    display: none;
    word-wrap: break-word; /* Add this line to enable word wrapping */
    width: 50%; /* Set the width to 80% or adjust as needed */
    margin: 20px; /* Center the box horizontally */
}
.breakdown-item {
    display: flex;
    justify-content: space-between;
    margin-bottom: 5px; /* Adjust margin as needed */
}

.breakdown-label {
    flex: 1; /* Take up 1 part of the available space */
    text-align: left;
    font-weight: bold;
}

.breakdown-value {
    flex: 1; /* Take up 1 part of the available space */
    text-align: right;
}

#breakdown div {
    margin-bottom: 10px;
}

#breakdown strong {
    display: block;
    margin-bottom: 10px;
}

main {
    flex: 1; /* Allow the main content to grow and push the footer down */
}


footer {
    position: fixed; /* Fixed position to stay at the bottom */
    bottom: 0; /* Align the footer to the bottom of the viewport */
    width: 100%; /* Full width of the viewport */
    padding: 10px 0;
    font-size: 0.75rem;
    color: #999;
    text-align: center;
    background-color: #f4f4f9;
    border-top: 1px solid #e0e0e0;
    z-index: 1000; /* Ensure the footer is above other content */
}
@keyframes flash {
    0% {
        background-color: #349ca4;
    }
    50% {
        background-color: #2b7378;
    }
    100% {
        background-color: #349ca4;
    }
}

.flash {
    animation: flash 0.3s;
}</style>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MH71 | Thanh toán</title>
<link type="text/css" rel="stylesheet" href="css/style.css"/>
</head>
<body>
    <div class="logo" style="text-align: center; margin-top: 100px; margin-bottom: 00px;">
    <img src="https://i.postimg.cc/4yTC7qfz/Asset-12.png" alt="Logo" width="300">
</div>
    <div class="content" style="text-align: center; margin-top: 00px; margin-bottom: 10px;">
        <h1>Thông tin thanh toán</h1>

        <input type="text" id="phone-number" placeholder="Nhập sdt đã kết nối Zalo">
        <button id="submit-btn" disabled="">Tra cứu</button>

        <div id="result"></div>

        <div id="total-box"></div>

        <div id="breakdown"></div>

        <div id="transaction-info">
            <div style="margin-top: 20px;"></div>

            <h2>Thông tin chuyển khoản</h2>

            <p>Ngân hàng BIDV CHI NHÁNH BẮC SÀI GÒN</p>

            <p>NGUYEN BAC KINH</p>
            <div id="account-info">
                <p id="account-number">31310000907350</p>
                <button id="copy-btn">Copy stk</button>
            </div>
        </div>

    </div>

    <footer>
        Nhà trọ MH71 | Bản quyền thuộc về NTD, 2024 | Deployed by Netlify.
    </footer>

    <script src="script.js"></script>

<script>fetch('https://docs.google.com/spreadsheets/u/1/d/e/2PACX-1vQcb0QGpzWkW2JV8sZbXzkCJr2AiRwiZNtf3i0g7Frp3NsOwAjOcma--HupkdlGrKiu1guF3OZIJ0r0/pubhtml?gid=70362248&single=true')
    .then(response => response.text())
    .then(data => {
        const parser = new DOMParser();
        const htmlDoc = parser.parseFromString(data, 'text/html');
        const tableBody = htmlDoc.querySelector('tbody');

        const submitBtn = document.getElementById('submit-btn');
        const phoneNumberInput = document.getElementById('phone-number');
        const resultDiv = document.getElementById('result');
        const totalBox = document.getElementById('total-box');
        const breakdownDiv = document.getElementById('breakdown');
        let cells;

        submitBtn.addEventListener('click', () => {
            const phoneNumber = phoneNumberInput.value.trim();
            const rows = tableBody.querySelectorAll('tr');
            let total = 0;
            let found = false;

            rows.forEach(row => {
                cells = row.querySelectorAll('td');
                const phone = cells[2].textContent.trim(); // Assuming Phone column is the third column (index 2)

                if (phone === phoneNumber) {
                    total = parseFloat(cells[9].textContent.replaceAll(',', '')); // Assuming Total column is the tenth column (index 9)
                    found = true;

                    // Extract additional details
                    const tenantName = cells[1].textContent; // Assuming Tenant Name is in the second column (index 1)
                    const roomNumber = cells[0].textContent; // Assuming Room Number is in the first column (index 0)

                    // Display breakdown details
                    breakdownDiv.style.display = 'block';
                    breakdownDiv.innerHTML = `
                                            <div class="breakdown-item">
                            <span class="breakdown-label">Tháng:</span>
                            <span class="breakdown-value"><b>${cells[14].textContent}</b></span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">Người thuê:</span>
                            <span class="breakdown-value"><b>${tenantName}</b></span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">Số phòng:</span>
                            <span class="breakdown-value"><b>${roomNumber}</b></span>
                        </div>

                      
                        <hr class="breakdown-divider">
                        <div class="breakdown-item">
                            <span class="breakdown-label">Số điện tháng trước:</span>
                            <span class="breakdown-value"><b>${cells[3].textContent}</b></span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">Số điện tháng này:</span>
                            <span class="breakdown-value"><b>${cells[4].textContent}</b></span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">Số điện dùng:</span>
                            <span class="breakdown-value"><b>${cells[5].textContent}</b></span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">Tiền điện (x3000 ₫):</span>
                            <span class="breakdown-value"><b>${cells[6].textContent}</b></span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">Tiền phòng:</span>
                            <span class="breakdown-value"><b>${cells[7].textContent}</b></span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">Tiền rác:</span>
                            <span class="breakdown-value"><b>${cells[8].textContent}</b></span>
                        </div>
                        <hr class="breakdown-divider">
                                                <div class="breakdown-item">
                            <span class="breakdown-label">Lưu ý:</span>
                            <span class="breakdown-value"><b>${cells[13].textContent}</b></span>
                        </div>
                          <div class="breakdown-item">
                            <span class="breakdown-label">Cập nhật:</span>
                            <span class="breakdown-value"><b>${cells[15].textContent}</b></span>
                        </div>
                        

                    `;
                }
            });

            if (found) {
                resultDiv.textContent = `Tổng số tiền cần thanh toán`;
                totalBox.style.display = 'block';

                const countTotal = (start, end, duration) => {
                    let current = 0;
                    const increment = total / duration * 40;
                    const timer = setInterval(() => {
                        current += increment;
                        totalBox.textContent = new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(current);
                        if (current >= total) {
                            clearInterval(timer);
                            totalBox.textContent = new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(total);
                        }
                    }, 20);
                };

                countTotal(0, total, 1000);
            } else {
                resultDiv.innerHTML = '<strong>Không tìm thấy thông tin</strong>';
                totalBox.textContent = '';
                totalBox.style.display = 'none';
                breakdownDiv.innerHTML = `
                    Vui lòng kiểm tra số điện thoại và thử lại.<br>
                    Số dt này phải trùng số liên lạc Zalo với chủ phòng trọ.
                `;
                breakdownDiv.classList.add('extra-note'); // Apply the new class for extra note styling
                breakdownDiv.style.display = 'block'; // Display the additional note
            }

            // Add flash animation to the button
            submitBtn.classList.add('flash');
            submitBtn.addEventListener('animationend', () => {
                submitBtn.classList.remove('flash');
            }, { once: true });
        });

        // Enable the button if the phone number field contains only numbers
        phoneNumberInput.addEventListener('input', () => {
            const phoneNumberValue = phoneNumberInput.value.trim();
            const isNumeric = /^\d+$/.test(phoneNumberValue);
            submitBtn.disabled = !isNumeric;
        });
    });

// Copy account number to clipboard
document.getElementById('copy-btn').addEventListener('click', () => {
    const accountNumber = document.getElementById('account-number').textContent;
    navigator.clipboard.writeText(accountNumber).then(() => {
        const copyBtn = document.getElementById('copy-btn');
        copyBtn.textContent = 'Đã copy STK';
        copyBtn.style.backgroundColor = '#28a745'; // Change button color to green
    }).catch(err => {
        console.error('Không thể copy:', err);
    });
});</script><script type="text/javascript" src="js/script.js"></script>
</body>