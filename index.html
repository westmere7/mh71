<!DOCTYPE html>
<html>
<head><meta http-equiv="cache-control" content="no-cache"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Expires" content="-1"><style type="text/css">/* CSS styles for the page */

        @font-face {
            font-family: 'Oswald';
            src: url('https://fonts.googleapis.com/css2?family=Oswald&display=swap');
        }

body {
    font-family: 'Open Sans', sans-serif; /* Change to Open Sans */
    background-color: #f4f4f9;
    //margin: 00;
    margin-bottom: 70px;
    margin-top: 0;
    display: flex;
    flex-direction: column;
    min-height: 00vh;
}

.content {
    flex: 1;
    display: flex;
    flex-direction: column;
    ///align-items: center;
    justify-content: center;
}

h1 {
    font-size: 2rem;
    color: #333;
    margin: 20px 0;
    text-align: center; /* Add this line to center the text */
}

input[type="number"] {
    ///width: 70%;
    height: 50px;
    padding: 10px;
    font-size: 1.5rem;
    font-family: 'Open Sans', sans-serif;
        font-weight: bold; /* Set the font weight to bold */
        color: #333333;

    text-align: center;
    
    border: 2px solid #ccc;
    border-radius: 9px;
    margin-bottom: 20px;
}

button {
    ///width: 70%;
    ///width: 300px;
    padding: 1rem;
    font-size: 1rem;
    color: #fff;
    font-family: 'Open Sans', sans-serif;
    font-weight: bold;
    background-color: #349ca4;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.2s ease;
    ///box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Add shadow for depth */
}

button:hover {
    ///background-color: #277c84; /* Darken the color on hover */
    transform: translateY(-2px); /* Add a subtle lift effect on hover */
}

button:active {
    transform: translateY(1px); /* Add a press effect when clicked */
}

button:disabled {
    background-color: #b7b7b7;
    cursor: not-allowed;
}

#result {
    font-size: 1rem;
    margin-top: 20px;
    color: #333;
}

#total-box {
 ///font-family: 'Oswald', sans-serif;
    ///font-weight: bold;
    margin-top: 20px;
    ///width: 70%;
    padding: 10px 10px 10px 10px; /* Increase padding for more space */
    font-size: 3.5rem; /* Increase font size for larger text */
    font-weight: bold;
     text-align: center;
    //border: 4px solid #c1dee0;
    color: #000000;
    background-color: #ffffff;
    border-radius: 10px; /* Round the corners of the box */
    display: none;
}

.info-box {
    
    ///border: 2px solid #349ca4;
    padding: 1rem .2rem;
    border-radius: 15px;
    background-color: #ffffff;
    ///align-items: center;
    ///justify-content: center;
    ///width: 300px;
    
}

.image-container {
   margin: 5px 0;
   
    
}

.image-container img {
    ///padding: 2rem;
    ///margin: 5px 5px 5px 5px;
    margin-bottom: -10px;
    max-width: 75%;
    height: auto;
    //border: 2px solid #349ca4;
    border-radius: px;
    ///box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
}

.bank-details {
    
    font-weight: bold;
    color: #349ca4;
}

.account-holder {
    font-style: italic;
    color: #349ca4;
}

#account-number {
    font-size: 16px;
    color: #349ca4;
}

#copy-btn {
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-size: 1rem;
    background-color: #349ca4;
    color: #fff;
    padding: 1rem 4rem;
    border: none;
    border-radius: 7px;
    cursor: pointer;
}

#breakdown {
    margin-top: 20px;
    margin-bottom: 20px;
     padding-top: 20px;
    padding-bottom: 20px;
     padding-right: 30px;
    padding-left: 30px;
    font-size: 1rem;
    color: #333;
    background-color: #fff;
    border: 0px solid #ccc;
    border-radius: 10px;
    display: none;
    word-wrap: break-word; /* Add this line to enable word wrapping */
    ///width: 70%; /* Set the width to 80% or adjust as needed */
    ///margin: 20px; /* Center the box horizontally */
}
.breakdown-item {
    display: flex;
    justify-content: space-between;
    margin-bottom: 5px; /* Adjust margin as needed */
}

.breakdown-label {
    flex: 1; /* Take up 1 part of the available space */
    text-align: left;
    font-weight: regular;
}

.breakdown-value {
    flex: 1; /* Take up 1 part of the available space */
    text-align: right;
}

.month {
    display: inline-block;
    /// margin: 0 0 100px 0;
    background-color: #EDF8FE;
    border-radius: 100px;
    padding: .6rem 1.3rem;
    font-weight: bold;
    color: #0776BB
;
    font-size: 1.2rem;
    flex: 1; /* Take up 1 part of the available space */
    text-align: center;
   
    
}

.breakdown-divider {
    border: 1px solid #ECECEC; /* Change the color of the border to #FF5733 */
}

.sep_element {
    margin: 0.65rem 0; /* Add vertical margin of 20px (top and bottom) and no horizontal margin (right and left) */
}

#breakdown div {
    margin-bottom: 10px;
}

#breakdown strong {
    display: block;
    margin-bottom: 10px;
}

main {
    flex: 1; /* Allow the main content to grow and push the footer down */
}


footer {
    position: fixed; /* Fixed position to stay at the bottom */
    bottom: 0; /* Align the footer to the bottom of the viewport */
    width: 100%; /* Full width of the viewport */
    padding: 10px 0;
    font-size: 0.75rem;
    color: #999;
    text-align: center;
    background-color: #f4f4f9;
    border-top: 1px solid #e0e0e0;
    z-index: 1000; /* Ensure the footer is above other content */
}
@keyframes flash {
    0% {
        background-color: #349ca4;
    }
    50% {
        background-color: #2b7378;
    }
    100% {
        background-color: #349ca4;
    }
}

.flash {
    animation: flash 0.3s;
}

        /* CSS to style the placeholder text */
        #phone-number::placeholder {
            
        //font-family: 'Open Sans', sans-serif;
       // font-weight: bold;
        font-size: 1.3rem; /* Set the font size of the placeholder text */
        padding: 10px;
        color: #999; /* Set the color of the placeholder text */
        //font-family: 'Open Sans', sans-serif;
        //font-weight: regular;
        }
        

    @media only screen and (max-width: 400px) {
        #total-box {
            font-size: 2.5rem;
        }
        
    }


</style>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MH71 | Thanh toán</title>
</head>
<body>
<div class="logo" style="text-align: center; margin-top: 24px; margin-bottom: -20px;">
<img src="https://i.postimg.cc/4yTC7qfz/Asset-12.png" alt="Logo" width="250">
</div>
<div class="content" style="text-align: center; margin-top: 00px; margin-bottom: 10px; padding: 0 2rem;">
<h1>Thông tin thanh toán</h1>
<input type="number" id="phone-number" placeholder="Nhập số điện thoại">

<button id="submit-btn" disabled>Tra cứu</button>
<div id="result"></div>
<div id="total-box"></div>



<div id="breakdown"></div>
<div id="transaction-info" style="display:flex; justify-content: center ;background: white;  border-radius: 10px";>

<div class="info-box">
    <div class="image-container">
        <img src="https://i.postimg.cc/qvBNsNm5/QR-MAIN.png" alt="Thông tin chuyển khoản">
    </div>
    <button id="copy-btn">Copy số TK</button>
</div>
</div>
</div>
<footer>
V1.1 | Bản quyền thuộc về NTD, 2024 | Deployed by Netlify.
</footer>
<script src="script.js"></script>
<script>fetch('https://docs.google.com/spreadsheets/u/1/d/e/2PACX-1vQcb0QGpzWkW2JV8sZbXzkCJr2AiRwiZNtf3i0g7Frp3NsOwAjOcma--HupkdlGrKiu1guF3OZIJ0r0/pubhtml?gid=70362248&single=true')
    .then(response => response.text())
    .then(data => {
        const parser = new DOMParser();
        const htmlDoc = parser.parseFromString(data, 'text/html');
        const tableBody = htmlDoc.querySelector('tbody');

        const submitBtn = document.getElementById('submit-btn');
        const phoneNumberInput = document.getElementById('phone-number');
        const resultDiv = document.getElementById('result');
        const totalBox = document.getElementById('total-box');
        const breakdownDiv = document.getElementById('breakdown');
        let cells;

        submitBtn.addEventListener('click', () => {
            const phoneNumber = phoneNumberInput.value.trim();
            const rows = tableBody.querySelectorAll('tr');
            let total = 0;
            let found = false;

            rows.forEach(row => {
                cells = row.querySelectorAll('td');
                const phone = cells[2].textContent.trim(); // Assuming Phone column is the third column (index 2)

                if (phone === phoneNumber) {
                    total = parseFloat(cells[9].textContent.replaceAll(',', '')); // Assuming Total column is the tenth column (index 9)
                    found = true;

                    // Extract additional details
                    const tenantName = cells[1].textContent; // Assuming Tenant Name is in the second column (index 1)
                    const roomNumber = cells[0].textContent; // Assuming Room Number is in the first column (index 0)

                    // Display breakdown details
                    breakdownDiv.style.display = 'block';
                    breakdownDiv.innerHTML = `
                                      <div class="month">
    Tháng
    <b>${cells[14].textContent}</b>
</div>
<div class="sep_element">
                                         
                        <div class="breakdown-item">
                            <span class="breakdown-label">Người thuê:</span>
                            <span class="breakdown-value"><b>${tenantName}</b></span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">Số phòng:</span>
                            <span class="breakdown-value"><b>${roomNumber}</b></span>
                        </div>

                      
                        <hr class="breakdown-divider">
                        <div class="breakdown-item">
                            <span class="breakdown-label">Số điện tháng trước:</span>
                            <span class="breakdown-value"><b>${cells[3].textContent}</b></span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">Số điện tháng này:</span>
                            <span class="breakdown-value"><b>${cells[4].textContent}</b></span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">Số điện dùng:</span>
                            <span class="breakdown-value"><b>${cells[5].textContent}</b></span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">Tiền điện (x3000 ₫):</span>
                            <span class="breakdown-value"><b>${cells[6].textContent}</b></span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">Tiền phòng:</span>
                            <span class="breakdown-value"><b>${cells[7].textContent}</b></span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">Tiền rác:</span>
                            <span class="breakdown-value"><b>${cells[8].textContent}</b></span>
                        </div>
                        <hr class="breakdown-divider">
                                                <div class="breakdown-item">
                            <span class="breakdown-label">Lưu ý:</span>
                            <span class="breakdown-value"><b>${cells[13].textContent}</b></span>
                        </div>
                          <div class="breakdown-item">
                            <span class="breakdown-label">Cập nhật:</span>
                            <span class="breakdown-value"><b>${cells[15].textContent}</b></span>
                        </div>
                        

                    `;
                }
            });

            if (found) {
                resultDiv.textContent = `Tổng số tiền cần thanh toán`;
                totalBox.style.display = 'block';

                const countTotal = (start, end, duration) => {
                    let current = 0;
                    const increment = total / duration * 40;
                    const timer = setInterval(() => {
                        current += increment;
                        totalBox.textContent = new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(current);
                        if (current >= total) {
                            clearInterval(timer);
                            totalBox.textContent = new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(total);
                        }
                    }, 20);
                };

                countTotal(0, total, 1000);
            } else {
               resultDiv.innerHTML = '<strong style="color: red;">Không tìm thấy thông tin</strong>';

                totalBox.textContent = '';
                totalBox.style.display = 'none';
                breakdownDiv.innerHTML = `
                    Vui lòng kiểm tra số điện thoại và thử lại.<br>
                    Số dt này phải trùng số liên lạc Zalo với chủ phòng trọ.
                `;
                breakdownDiv.classList.add('extra-note'); // Apply the new class for extra note styling
                breakdownDiv.style.display = 'block'; // Display the additional note
            }

            // Add flash animation to the button
            submitBtn.classList.add('flash');
            submitBtn.addEventListener('animationend', () => {
                submitBtn.classList.remove('flash');
            }, { once: true });
        });

        // Enable the button if the phone number field contains only numbers
        phoneNumberInput.addEventListener('input', () => {
            const phoneNumberValue = phoneNumberInput.value.trim();
            const isNumeric = /^\d+$/.test(phoneNumberValue);
            submitBtn.disabled = !isNumeric;
        });
    });

// Copy account number to clipboard
document.getElementById('copy-btn').addEventListener('click', () => {
    ///const accountNumber = document.getElementById('account-number').textContent;
    navigator.clipboard.writeText('31310000907350').then(() => {
        const copyBtn = document.getElementById('copy-btn');
        copyBtn.textContent = 'Đã copy STK';
        copyBtn.style.backgroundColor = '#28a745'; // Change button color to green
    }).catch(err => {
        console.error('Không thể copy:', err);
    });
});</script></body>
